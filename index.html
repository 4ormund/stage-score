<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Stage Score</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
          body { background: #0D0D0F; }
          @keyframes spin { to { transform: rotate(360deg); } }
          .animate-spin { animation: spin 1s linear infinite; }
          .divider { border-color: rgba(255,255,255,0.08); }
          .purple-btn { background: #A18EFD; }
          .purple-btn:hover { background: #8B7AE0; }
        </style>
  </head>
  <body class="min-h-screen text-white">
      <div id="app"></div>div>
      <script>
            const TOKEN_ADDRESS = "0x0e8a4f5C5C6dD44eBEaBeD5073582Ce48be112AA";
            const TOKEN_SYMBOL = "SEED";
            let isLoggedIn = false;
            let isLoading = false;
            let score = null;
            let user = null;
            const mockOnChainData = {
                    purchases: [
                      { txHash: "0xabc123...", amount: 50000, timestamp: 1723737600, priceAtBuy: 0.00089 },
                      { txHash: "0xdef456...", amount: 75000, timestamp: 1727020800, priceAtBuy: 0.00112 },
                            ],
                    currentBalance: 89500,
                    totalPurchased: 125000,
                    totalSold: 35500,
                    firstBuyTimestamp: 1723737600,
            };
            const priceData = { value: 0.00159, priceChange24h: -41.4 };
            const stageLogo = `<svg width="48" height="48" viewBox="0 0 838 838" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M838 419C838 650.407 650.407 838 419 838C187.593 838 0 650.407 0 419C0 187.593 187.593 0 419 0C650.407 0 838 187.593 838 419Z" fill="#A18EFD"/><path d="M738 419C738 242.821 595.179 100 419 100C242.821 100 100 242.821 100 419C100 595.179 242.821 738 419 738V838C187.593 838 0 650.407 0 419C0 187.593 187.593 0 419 0C650.407 0 838 187.593 838 419C838 650.407 650.407 838 419 838V738C595.179 738 738 595.179 738 419Z" fill="#6354B0"/><path d="M405.803 573.254C428.52 573.255 446.937 591.064 446.937 613.033C446.936 635.001 428.52 652.811 405.803 652.811C383.085 652.811 364.668 635.001 364.668 613.033C364.668 591.064 383.085 573.254 405.803 573.254ZM673.509 359.564L597.118 435.955L673.51 512.346L624.926 560.93L548.534 484.539L472.143 560.93L423.56 512.346L499.95 435.955L423.56 359.564L472.144 310.98L548.534 387.371L624.926 310.98L673.509 359.564ZM388.568 358.885L312.177 435.276L388.568 511.667L339.985 560.251L263.594 483.86L187.202 560.251L138.618 511.667L215.01 435.276L138.619 358.885L187.202 310.301L263.593 386.692L339.984 310.301L388.568 358.885Z" fill="#6354B0"/></svg>`;
            const stageLockup = `<svg width="120" height="29" viewBox="0 0 3587 872" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M838 419C838 650.407 650.407 838 419 838C187.593 838 0 650.407 0 419C0 187.593 187.593 0 419 0C650.407 0 838 187.593 838 419Z" fill="#A18EFD"/><path d="M738 419C738 242.821 595.179 100 419 100C242.821 100 100 242.821 100 419C100 595.179 242.821 738 419 738V838C187.593 838 0 650.407 0 419C0 187.593 187.593 0 419 0C650.407 0 838 187.593 838 419C838 650.407 650.407 838 419 838V738C595.179 738 738 595.179 738 419Z" fill="#6354B0"/><path d="M405.803 573.254C428.52 573.255 446.937 591.064 446.937 613.033C446.936 635.001 428.52 652.811 405.803 652.811C383.085 652.811 364.668 635.001 364.668 613.033C364.668 591.064 383.085 573.254 405.803 573.254ZM673.509 359.564L597.118 435.955L673.51 512.346L624.926 560.93L548.534 484.539L472.143 560.93L423.56 512.346L499.95 435.955L423.56 359.564L472.144 310.98L548.534 387.371L624.926 310.98L673.509 359.564ZM388.568 358.885L312.177 435.276L388.568 511.667L339.985 560.251L263.594 483.86L187.202 560.251L138.618 511.667L215.01 435.276L138.619 358.885L187.202 310.301L263.593 386.692L339.984 310.301L388.568 358.885Z" fill="#6354B0"/><path d="M1212.69 724C1108.48 724 1066 675.287 1066 562.72V507.424H1178.17V577.861C1178.17 604.192 1185.48 619.991 1205.39 619.991C1225.96 619.991 1232.6 608.8 1232.6 581.152C1232.6 529.147 1219.33 510.057 1174.19 467.269L1123.08 418.555C1083.92 382.35 1066 342.194 1066 296.114C1066 199.346 1111.8 148 1197.42 148C1302.3 148 1342.12 202.638 1342.12 315.205H1225.96V276.366C1225.96 261.225 1216.01 252.009 1201.41 252.009C1182.82 252.009 1174.86 263.2 1174.86 278.999C1174.86 294.798 1181.49 312.571 1206.72 336.27L1273.09 399.465C1312.25 436.987 1345.44 475.168 1345.44 554.162C1345.44 660.146 1310.92 724 1212.69 724Z" fill="white"/><path d="M1432.35 718.734V261.883H1364.65V153.266H1614.22V261.883H1546.52V718.734H1432.35Z" fill="white"/><path d="M1616.07 718.734L1671.16 153.266H1864.31L1918.74 718.734H1810.55L1802.58 627.232H1733.55L1726.92 718.734H1616.07ZM1742.18 537.047H1793.96L1768.73 249.376H1763.42L1742.18 537.047Z" fill="white"/><path d="M2070.97 724C1988.67 724 1948.84 666.729 1948.84 550.213V306.647C1948.84 201.979 1995.97 148 2088.89 148C2204.39 148 2231.6 219.095 2231.6 345.486H2120.09V294.798C2120.09 270.441 2115.44 252.009 2094.2 252.009C2067.65 252.009 2061.68 273.074 2061.68 294.139V567.986C2061.68 598.926 2067.65 619.991 2091.55 619.991C2115.44 619.991 2121.42 598.926 2121.42 567.986V487.017H2090.89V389.591H2230.27V718.734H2184.48L2165.23 671.337C2144.65 706.885 2113.45 724 2070.97 724Z" fill="white"/><path d="M2282.28 718.734V153.266H2510.61V262.542H2398.44V372.475H2505.96V479.118H2398.44V608.8H2517.91V718.734H2282.28Z" fill="white"/><path d="M2561.79 718.734V622.624H2677.95V718.734H2561.79Z" fill="white"/><path d="M2720.77 718.734V153.266H2949.1V263.2H2835.6V353.385H2943.13V462.002H2835.6V718.734H2720.77Z" fill="white"/><path d="M3124.61 724C3029.69 724 2985.88 670.021 2985.88 567.328V153.266H3096.73V562.72C3096.73 591.026 3098.72 619.991 3124.61 619.991C3150.49 619.991 3152.49 591.685 3152.49 562.72V153.266H3263.33V567.328C3263.33 670.021 3219.52 724 3124.61 724Z" fill="white"/><path d="M3306.9 718.734V153.266H3424.38L3476.82 423.822V153.266H3587V718.734H3475.49L3418.41 435.671V718.734H3306.9Z" fill="white"/></svg>`;
            function calculateStageScore(data, price) {
                    const now = Date.now() / 1000;
                    const totalUsdInvested = data.purchases.reduce((sum, p) => sum + (p.amount * p.priceAtBuy), 0);
                    const purchaseScore = Math.min((totalUsdInvested / 500) * 333, 333);
                    const daysSinceFirst = Math.floor((now - data.firstBuyTimestamp) / 86400);
                    const holdScore = Math.min((daysSinceFirst / 365) * 333, 333);
                    const currentValue = data.currentBalance * price;
                    const netValueRatio = currentValue / totalUsdInvested;
                    const netTradingScore = Math.min(netValueRatio * 167, 334);
                    return {
                              overall: Math.round(purchaseScore + holdScore + netTradingScore),
                              breakdown: { purchase: Math.round(purchaseScore), holdTime: Math.round(holdScore), netTrading: Math.round(netTradingScore) },
                              metrics: { totalInvested: totalUsdInvested, currentValue, holdDays: daysSinceFirst, returnPercent: ((netValueRatio - 1) * 100).toFixed(2) }
                    };
            }
            function renderLoginScreen() {
                    return `<div class="min-h-screen flex flex-col items-center justify-center p-6"><div class="text-center mb-8">${stageLogo}<h1 class="text-2xl font-bold text-white mt-4 mb-2">Stage Score</h1><p class="text-gray-500">Connect your X account to view your $SEED score</p></div><button onclick="handleLogin()" class="flex items-center gap-3 px-6 py-3 rounded-lg transition-all purple-btn text-white font-medium"><svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>Login with X</button><div class="mt-8 text-center text-gray-600 text-sm max-w-md"><p>Your Stage Score is calculated based on:</p><ul class="mt-2 space-y-1 text-left pl-4"><li>â€¢ Purchase history of $SEED</li><li>â€¢ Hold time duration</li><li>â€¢ Net trading value (P/L)</li></ul></div></div>`;
            }
            function renderLoadingScreen() {
                    return `<div class="min-h-screen flex flex-col items-center justify-center"><div class="w-8 h-8 border-2 border-gray-600 border-t-purple-400 rounded-full animate-spin"></div><p class="mt-4 text-gray-500">Loading your score...</p></div>`;
            }
            function renderDashboard() {
                    const returnPercent = parseFloat(score.metrics.returnPercent);
                    return `<div class="min-h-screen p-6"><div class="max-w-2xl mx-auto"><div class="flex items-center justify-between mb-6 pb-4 border-b divider"><div class="flex items-center gap-4"><div class="w-12 h-12 rounded-full overflow-hidden border border-gray-700"><img src="${user.avatar}" alt="${user.name}" class="w-full h-full object-cover" onerror="this.src='https://api.dicebear.com/7.x/identicon/svg?seed=${user.username}'"></div><div><h1 class="text-lg font-semibold text-white">${user.name}</h1><p class="text-gray-500 text-sm">@${user.username}</p></div></div><div class="flex items-center gap-3"><span class="px-3 py-1 rounded text-xs text-gray-300 border border-gray-700">Rank #26,327</span><span class="px-3 py-1 rounded text-xs text-gray-300 border border-gray-700">Top 9.2%</span><button class="px-4 py-2 rounded-lg text-white font-medium text-sm purple-btn">Score card</button><button onclick="handleLogout()" class="px-3 py-2 rounded-lg text-gray-400 hover:text-white text-sm border border-gray-700">Logout</button></div></div><div class="border-b divider"><div class="flex items-center justify-between py-4"><div class="flex items-center gap-2"><span class="text-gray-300">Overall</span></div><div class="flex items-center gap-4"><div class="w-32 h-1.5 rounded-full overflow-hidden bg-gray-800"><div class="h-full rounded-full" style="width:${(score.overall/1000)*100}%;background:#A18EFD;"></div></div><span class="text-white text-xl font-light tabular-nums w-16 text-right">${score.overall}</span></div></div></div><div class="flex items-center justify-between py-4 border-b divider"><span class="text-gray-400">Purchase</span><span class="text-white text-lg tabular-nums">${score.breakdown.purchase}</span></div><div class="flex items-center justify-between py-4 border-b divider"><span class="text-gray-400">Hold Time</span><span class="text-white text-lg tabular-nums">${score.breakdown.holdTime}</span></div><div class="flex items-center justify-between py-4 border-b divider"><span class="text-gray-400">Net Trading</span><span class="text-white text-lg tabular-nums">${score.breakdown.netTrading}</span></div><div class="mt-6"><div class="grid grid-cols-6 gap-4 py-3 text-xs text-gray-500 uppercase tracking-wider border-b divider"><div>TOKEN</div><div class="text-right">BALANCE</div><div class="text-right">VALUE</div><div class="text-right">AVG BUY</div><div class="text-right">CURRENT</div><div class="text-right">P/L %</div></div><div class="grid grid-cols-6 gap-4 py-4 items-center border-b divider"><div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-gradient-to-br from-yellow-400 to-green-400 flex items-center justify-center text-xs">ðŸŒ±</div><div><div class="flex items-center gap-2"><span class="text-white font-medium">${TOKEN_SYMBOL}</span><span class="text-blue-400 text-xs">âœ“</span></div><span class="text-gray-600 text-xs font-mono">${TOKEN_ADDRESS.slice(0,6)}...${TOKEN_ADDRESS.slice(-4)}</span></div></div><div class="text-right text-white">${(mockOnChainData.currentBalance/1000).toFixed(1)}K</div><div class="text-right text-white">$${(mockOnChainData.currentBalance*priceData.value).toFixed(2)}</div><div class="text-right text-gray-400">$${(score.metrics.totalInvested/mockOnChainData.totalPurchased).toFixed(6)}</div><div class="text-right text-white">$${priceData.value.toFixed(6)}</div><div class="text-right"><span class="${returnPercent>=0?'text-green-400':'text-red-400'}">${returnPercent>=0?'+':''}${score.metrics.returnPercent}%</span></div></div></div><div class="mt-6"><div class="py-3 text-sm text-gray-500 border-b divider">Transaction History</div>${mockOnChainData.purchases.map(tx=>`<div class="flex items-center justify-between py-3 border-b divider"><div class="flex items-center gap-3"><div class="w-6 h-6 rounded-full flex items-center justify-center bg-green-500/20 text-green-400 text-xs">â†“</div><div><span class="text-white text-sm">Buy</span><span class="text-gray-500 text-xs ml-2">${new Date(tx.timestamp*1000).toLocaleDateString()}</span></div></div><div class="text-right"><div class="text-white text-sm">${(tx.amount/1000).toFixed(1)}K ${TOKEN_SYMBOL}</div><div class="text-gray-500 text-xs">@ $${tx.priceAtBuy.toFixed(6)}</div></div></div>`).join('')}</div><div class="mt-8 pt-4 border-t divider flex items-center justify-between"><div>${stageLockup}</div><div class="flex items-center gap-2 text-gray-500 text-sm"><span>@${user.username}</span></div></div></div></div>`;
            }
            function render() {
                    const app = document.getElementById('app');
                    if (isLoading) { app.innerHTML = renderLoadingScreen(); }
                    else if (!isLoggedIn) { app.innerHTML = renderLoginScreen(); }
                    else { app.innerHTML = renderDashboard(); }
            }
            function handleLogin() {
                    isLoading = true;
                    render();
                    setTimeout(() => {
                              user = { name: "Paul Warren", username: "4ormund", avatar: "https://pbs.twimg.com/profile_images/1679966748083994624/RXUaFbnz_400x400.jpg", wallet: "0x5B3EC1f58484Bf3d44C8DA3E8291159D159BbE89" };
                              score = calculateStageScore(mockOnChainData, priceData.value);
                              isLoggedIn = true;
                              isLoading = false;
                              render();
                    }, 1500);
            }
            function handleLogout() { isLoggedIn = false; user = null; score = null; render(); }
            render();
      </script>
  </body>body>
</html>html>
      </script>
    </style></title>
  </head>
